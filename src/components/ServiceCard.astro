---
import Card from './Card.astro';
import { urlFor, hasValidAsset, type Service } from '../lib/sanity';

interface Props {
  service: Service;
  showFeatures?: boolean;
  showBookButton?: boolean;
  animationDelay?: number;
}

const { 
  service, 
  showFeatures = true, 
  showBookButton = true,
  animationDelay 
} = Astro.props;
---

<Card class="service-card" animationDelay={animationDelay}>
  <div class="service-header">
    {hasValidAsset(service.image) ? (
      <img 
        src={urlFor(service.image).width(80).height(80).url()} 
        alt={service.title} 
        class="service-image"
        width="80"
        height="80"
        loading="lazy"
      />
    ) : (
      <span class="service-icon">{service.icon || 'üêï'}</span>
    )}
    <div>
      <h3>{service.title}</h3>
      {service.price && <span class="price">{service.price}</span>}
    </div>
  </div>
  <p class="description">{service.description}</p>
  {showFeatures && service.features && service.features.length > 0 && (
    <ul class="features">
      {service.features.map((feature) => (
        <li><span class="checkmark">‚úì</span> {feature}</li>
      ))}
    </ul>
  )}
  {showBookButton && <a href="/contact" class="btn btn-primary">Book Now</a>}
</Card>

<style>
  .service-card {
    display: flex;
    flex-direction: column;
    padding: var(--space-2xl);
  }

  .service-header {
    display: flex;
    align-items: center;
    gap: var(--space-lg);
    margin-bottom: var(--space-lg);
  }

  .service-icon {
    font-size: 3rem;
  }

  .service-image {
    width: 80px;
    height: 80px;
    border-radius: var(--radius-lg);
    object-fit: cover;
  }

  .service-header h3 {
    font-size: var(--text-xl);
    margin-bottom: var(--space-xs);
  }

  .price {
    color: var(--color-primary);
    font-weight: 600;
  }

  .description {
    color: var(--color-text-muted);
    margin-bottom: var(--space-lg);
    flex-grow: 1;
  }

  .features {
    margin-bottom: var(--space-xl);
  }

  .features li {
    padding: var(--space-sm) 0;
    color: var(--color-text-muted);
  }

  .checkmark {
    color: var(--color-secondary);
    margin-right: var(--space-sm);
    font-weight: bold;
  }
</style>

